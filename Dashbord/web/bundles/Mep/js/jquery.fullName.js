(function(a){a.addFullName=function(d,e){if(d.inp){return false}e=a.extend({path:"",label:"",name1:"lastname",name2:"firstname",description:"",firstName:"",lastName:"",required:0,nbrMin:0,nbrMax:0,isAutoComplete:0,autoCompleteProperties:new Array(),selectEvent:null},e);var c={populate:function(){a(d).find(".form-label-up").html(e.label);a(d).find(".description").html(e.description);a(d).find(".first-name").val(e.firstName);a(d).find(".last-name").val(e.lastName);if(parseInt(e.isAutoComplete)==1){for($x in e.autoCompleteProperties){switch(parseInt(e.autoCompleteProperties[$x].choice)){case 4:a.destroyAutocomplete("form-textbox");a(d).find(".form-textbox").attr({autocomplete:"on"});break;case 5:a.destroyAutocomplete("form-textbox");$value=(e.autoCompleteProperties[$x].value).split(",");a.initAutoComplete("form-textbox",e.path,$value,e.nbrMax);break;case 6:a.destroyAutocomplete("form-textbox");a.initAutoComplete("form-textbox",e.path,e.autoCompleteProperties[$x].value,e.nbrMax);break}}}else{a.destroyAutocomplete("form-textbox")}if(parseInt(e.required)==1){if(a(d).find(".form-label-up span:last").hasClass("form-required")){return}else{$rSpan=a("<span>").addClass("form-required").html("*");a(d).find(".form-label-up").append($rSpan)}}else{if(a(d).find(".form-label-up span:last").hasClass("form-required")){a(d).find(".form-label-up span:last").remove()}else{return}}}};c.gDiv=a("<div>");c.lDiv=a("<label>");c.lSpan=a("<span>");c.rSpan=a("<span>");c.iDiv=a("<div>");c.isDiv=a("<div>");c.fSpan=a("<span>");c.sSpan=a("<span>");c.fInput=a("<input>");c.lInput=a("<input>");c.fLabel=a("<label>");c.lLabel=a("<label>");c.dLabel=a("<label>");c.gDiv.css({display:"inline-block"});c.lDiv.addClass("form-label-up").css({zIndex:100});a(d).before(c.gDiv);a(d).append(c.gDiv);a(c.lDiv).html(e.label);a(c.fInput).attr("name",e.name1);a(c.lInput).attr("name",e.name2);if(parseInt(e.required)==1){a(c.rSpan).addClass("form-required");a(c.rSpan).html("*");a(c.lSpan).append(c.rSpan)}a(c.gDiv).append(c.lDiv);a(c.iDiv).addClass("form-input");a(c.isDiv).addClass("question-input");a(c.iDiv).append(c.isDiv);a(c.gDiv).append(c.iDiv);a(c.fSpan).addClass("form-sub-label-container");a(c.fInput).attr({type:"text"});a(c.fInput).addClass("form-textbox first-name");a(c.fInput).attr("size",10);a(c.fLabel).addClass("form-sub-label");a(c.fLabel).html("Nom");a(c.fSpan).append(c.fInput);a(c.fSpan).append(c.fLabel);a(c.sSpan).addClass("form-sub-label-container");a(c.lInput).attr({type:"text"});a(c.lInput).addClass("form-textbox last-name");a(c.lInput).attr("size",15);a(c.lLabel).addClass("form-sub-label");a(c.lLabel).html("Prénom");a(c.sSpan).append(c.lInput);a(c.sSpan).append(c.lLabel);a(c.fInput,c.lInput).keypress(function(){$value=$value=a(this).val();if(parseInt(e.nbrMax)>0){if($value.length>=parseInt(e.nbrMax)){a(this).attr({maxlength:e.nbrMax});a.validationEngine.buildPrompt(a(this),"Le nombre maximal de caractère(s) est "+e.nbrMax,"error")}else{a.validationEngine.closePrompt(".formError",true)}}else{a(this).removeAttr("maxlength")}if(parseInt(e.nbrMin)>0){if($value.length<parseInt(e.nbrMin)){a.validationEngine.buildPrompt(a(this),"Le nombre minimal de caractère(s) est "+e.nbrMin,"error")}else{a.validationEngine.closePrompt(".formError",true)}}});a(c.lInput).keypress(function(){$value=$value=a(this).val();if(parseInt(e.nbrMax)>0){if($value.length>=parseInt(e.nbrMax)){a(this).attr({maxlength:e.nbrMax});a.validationEngine.buildPrompt(a(this),"Le nombre maximal de caractère(s) est "+e.nbrMax,"error")}else{a.validationEngine.closePrompt(".formError",true)}}else{a(this).removeAttr("maxlength")}if(parseInt(e.nbrMin)>0){if($value.length<parseInt(e.nbrMin)){a.validationEngine.buildPrompt(a(this),"Le nombre minimal de caractère(s) est "+e.nbrMin,"error")}else{a.validationEngine.closePrompt(".formError",true)}}});a(c.isDiv).append(c.fSpan);a(c.isDiv).append(c.sSpan);a(c.fInput).val(e.firstName);a(c.lInput).val(e.lastName);if(parseInt(e.isAutoComplete)==1){}a(c.dLabel).addClass("form-sub-label description").html(e.description);a(c.isDiv).append(c.dLabel);if(parseInt(e.isAutoComplete)==1){for($x in e.autoCompleteProperties){switch(parseInt(e.autoCompleteProperties[$x].choice)){case 4:a.destroyAutocomplete("form-textbox");a(d).find(".form-textbox").attr({autocomplete:"on"});break;case 5:a.destroyAutocomplete("form-textbox");$value=(e.autoCompleteProperties[$x].value).split(",");a.initAutoComplete("form-textbox",e.path,$value,e.nbrMax);break;case 6:a.destroyAutocomplete("form-textbox");a.initAutoComplete("form-textbox",e.path,e.autoCompleteProperties[$x].value,e.nbrMax);break}}}d.p=e;d.inp=c;return d};var b=false;a(document).ready(function(){b=true});a.fn.fullName=function(c){return this.each(function(){a.addFullName(this,c)})};a.fn.reload=function(){return this.each(function(){if(this.inp){this.inp.populate()}})};a.fn.options=function(c){return this.each(function(){if(this.inp){a.extend(this.p,c)}})};a.initAutoComplete=function(f,e,d,c){$pluguinJs=e+"/public/js/generate/pluguins/js/jquery.autoComplete.js";$pluguinCss=e+"/public/js/generate/pluguins/css/jquery.autoComplete.css";a.Loader({url:[$pluguinCss,],dataType:"css",success:function(){a.Loader({url:[$pluguinJs,],dataType:"js",success:function(){a("."+f).autocomplete({source:d,select:function(g,h){if(c>0){h.item.value=h.item.value.substring(0,c);return h.item}}})}})}})};a.destroyAutocomplete=function(c){a("."+c).autocomplete("destroy")}})(jQuery);
